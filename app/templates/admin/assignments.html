{% extends "base.html" %}

{% block content %}
<div style="display: flex; min-height: 100vh;">
    <!-- Sidebar -->
    <div class="sidebar"
        style="width: 250px; background: var(--card-bg); border-right: 1px solid var(--border); padding: 2rem 1rem;">
        <h3 style="margin-bottom: 2rem; padding-left: 1rem; color: var(--accent);">Course Admin</h3>
        <nav>
            <ul style="list-style: none; padding: 0;">
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('main.dashboard') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--text-secondary);">Dashboard</a>
                </li>
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('admin_bp.categories') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--text-secondary);">Categories</a>
                </li>
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('admin_bp.courses') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--text-secondary);">Courses</a>
                </li>
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('admin_bp.all_quizzes') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--text-secondary);">Quizzes</a>
                </li>
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('admin_bp.all_assignments') }}"
                        class="btn btn-block"
                        style="text-align: left; background: rgba(56, 139, 253, 0.15); color: var(--accent);">Assignments</a>
                </li>
                <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('admin_bp.students') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--text-secondary);">Students</a>
                </li>
                <li style="margin-top: 2rem;"><a href="{{ url_for('auth.logout') }}" class="btn btn-block"
                        style="text-align: left; background: transparent; color: var(--error);">Logout</a></li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div
        style="flex: 1; padding: 2rem; background: radial-gradient(circle at top right, rgba(56, 139, 253, 0.05), transparent 40%);">
        <div style="max-width: 900px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 3rem;">
                <div>
                    <h1
                        style="margin: 0; font-size: 2.5rem; background: linear-gradient(135deg, white 0%, var(--text-secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                        All Assignments</h1>
                    <p style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 1.1rem;">Manage Assignments
                        across all courses</p>
                </div>
            </div>

            {% for item in courses_with_assignments %}
            <div style="margin-bottom: 2.5rem;">
                <div style="margin-bottom: 1rem; padding-left: 0.5rem; border-left: 3px solid var(--accent);">
                    <h2 style="margin: 0; font-size: 1.5rem; color: white;">{{ item.course.title }}</h2>
                </div>

                <div class="glass-card" style="padding: 0; overflow: hidden; border: 1px solid var(--border);">
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        {% for assignment in item.assignments %}
                        <li
                            style="padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4 style="margin: 0; font-weight: 500; font-size: 1.1rem;">{{ assignment.lesson.title
                                    }}</h4>
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">Max Score: {{
                                    assignment.max_score }}</span>
                            </div>
                            <div>
                                <a href="{{ url_for('admin_bp.assignment_submissions', assignment_id=assignment.id) }}"
                                    class="btn btn-sm"
                                    style="font-size: 0.8rem; border: 1px solid var(--accent); color: var(--accent); margin-right: 0.5rem;">View
                                    Submissions</a>
                                <a href="{{ url_for('admin_bp.course_content', course_id=item.course.id) }}"
                                    class="btn btn-sm"
                                    style="font-size: 0.8rem; border: 1px solid var(--border); color: var(--text-secondary);">Edit
                                    in Context</a>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% else %}
            <div style="text-align: center; padding: 4rem; color: var(--text-secondary);">
                <p>No assignments created yet.</p>
                <a href="{{ url_for('admin_bp.courses') }}" class="btn btn-primary" style="margin-top: 1rem;">Go to
                    Course Content to Add Assignments</a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}